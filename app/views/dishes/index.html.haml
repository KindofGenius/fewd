%h1 Listing dishes

.panel.panel-default
  %table.table.table-striped
    %thead
      %tr
        %th Dish
        %th Restaurant
        %th Name
        %th Moods
        %th
        %th
        %th
        %th

    %tbody
      - @dishes.each do |dish|
        %tr
          %td= image_tag(dish.dish_images.first.avatar.url, class: "img-responsive img-circle", style:"height:20px;")
          %td
            -unless Restaurant.find(dish.restaurant_id).nil?
              = Restaurant.find(dish.restaurant_id).name
            -else
              = dish.restaurant_id
          %td
            -unless dish.nil?
              = dish.name
            -else
              =dish.id
          %td
            -if dish.moods.count > 0
              = dish.moods.first.name
          %td= link_to 'Show', dish
          %td= link_to 'Edit', edit_dish_path(dish)
          %td= link_to 'Destroy', dish, :method => :delete, :data => { :confirm => 'Are you sure?' }
          %td
            %a.quick-edit-reveal{:data => {:dish_id => "#{dish.id}"}} Quick Edit
        .edit-ajax
          =render partial: "quick_edit", :locals => {:dish => dish}


= will_paginate @dishes, renderer: BootstrapPagination::Rails
%br

= link_to 'New Dish', new_dish_path
